<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://unpkg.com/react@17.0.2/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17.0.2/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- 
      Curso 132 - Grupo 08 -> analiavolonte@gmail.com
      
      20387275; Alegre, Cristina Mabel   
      23979860; Alfieri, Carlos Roque      
      24859318; Volonté, Analia Verónica  
      
      funciona: 
      diseño: 
    -->
    <title>TP Final To Do List</title>
    
    <style>
      body {
        background-color: #f0f0f0;
        font-family: Arial, sans-serif;
      }

      h1 {
        color: #333;
        text-align: center;
        font-size: 20px;
        margin-bottom: 20px;
      }

      button {
        margin-bottom: 20px;
      }

      .container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh;
      }

      main {
        margin: 0 auto;
        width: 300px;
        padding: 20px;
      }

      form {
        border: 1px solid #ccc;
        padding: 10px 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      form input {
        font-size: 20px;
        width: 180px;
        border-radius: 50px;
        padding: 5px 10px;
      }

      .botones {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        height: 20;
        width: 50;
      }
    </style>

    <script type="text/babel">
      //App.jsx
      const { useState, useEffect } = React;
      const initialTasks = [
        { id: 1, nombre: "Caminata", completada: false },
        { id: 2, nombre: "Viandas", completada: false },
        { id: 3, nombre: "Consumo de Agua", completada: false },
      ];

      const App = () => {
        const [tasks, setTasks] = useState(initialTasks);

        // Efecto de Actualización
        useEffect(() => {
          console.log("La lista de tareas ha cambiado:", tasks);
        }, [tasks]);

        const handleToggleComplete = (taskId) => {
          setTasks((prevTasks) =>
            prevTasks.map((task) =>
              task.id === taskId
                ? { ...task, completada: !task.completada }
                : task
            )
          );
        };

        const handleDelete = (taskId) => {
          setTasks((prevTasks) =>
            prevTasks.filter((task) => task.id !== taskId)
          );
        };

        const handleAddTask = (taskName) => {
          const newTask = {
            id: tasks.length + 1,
            nombre: taskName,
            completada: false,
          };
          setTasks((prevTasks) => [...prevTasks, newTask]);
        };

        // Renderiza la aplicación
        return (
          <div className="container">
            <h1>Lista de Tareas</h1>
            <TaskForm onAddTask={handleAddTask} />
            <TaskList
              tasks={tasks}
              onToggleComplete={handleToggleComplete}
              onDelete={handleDelete}
            />
          </div>
        );
      };
      //TaskList.jsx
      const TaskList = ({ tasks, onToggleComplete, onDelete }) => {
        return (
          <div>
            {tasks.map((task) => (
              <TaskItem
                key={task.id}
                task={task}
                onToggleComplete={onToggleComplete}
                onDelete={onDelete}
              />
            ))}
          </div>
        );
      };
      //TaskItem.jsx
      const TaskItem = ({ task, onToggleComplete, onDelete }) => {
        const { id, nombre, completada } = task;

        return (
          <div className={`task-item ${completada ? "completed" : ""}`}>
            <span>{nombre}</span>
            <div>
              <button onClick={() => onToggleComplete(id)}>
                {completada ? "Desmarcar" : "Marcar como Completada"}
              </button>
              <button onClick={() => onDelete(id)}>Eliminar</button>
              {/* Nuevo botón para marcar como realizada */}
              {!completada && (
                <button onClick={() => onToggleComplete(id)}>
                  Marcar como Realizada
                </button>
              )}
            </div>
          </div>
        );
      };
      //TaskForm.jsx
      const TaskForm = ({ onAddTask }) => {
        const [taskName, setTaskName] = useState("");

        const handleInputChange = (event) => {
          setTaskName(event.target.value);
        };

        const handleAddTask = () => {
          onAddTask(taskName);
          setTaskName("");
        };

        return (
          <div>
            <input type="text" value={taskName} onChange={handleInputChange} />
            <button onClick={handleAddTask}>Agregar Tarea</button>
          </div>
        );
      };

      const root = document.getElementById("root");
      ReactDOM.render(<App />, root);
    </script>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
